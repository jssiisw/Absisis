name: Ubuntu + User aban + CyberSec Tools

on: [workflow_dispatch]

jobs:
  setup-cybersec:
    runs-on: ubuntu-latest
    
    steps:
      - name: Create User 'aban'
        run: |
          # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
          sudo useradd -m -s /bin/bash aban
          echo "aban:aban" | sudo chpasswd
          
          # Ø¥Ø¹Ø·Ø§Ø¡ ØµÙ„Ø§Ø­ÙŠØ§Øª sudo
          sudo usermod -aG sudo aban
          
          echo "âœ… User 'aban' created with password 'aban'"
          id aban

      - name: Install Cybersecurity Tools
        run: |
          sudo apt-get update -y
          
          # === Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø­ ÙˆØ§Ù„ÙØ­Øµ ===
          sudo apt-get install -y nmap masscan
          
          # === Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆÙŠØ¨ ===
          sudo apt-get install -y sqlmap nikto dirb gobuster wfuzz
          
          # === Ø£Ø¯ÙˆØ§Øª ÙƒØ³Ø± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ===
          sudo apt-get install -y john hashcat hydra
          
          # === Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø´Ø¨ÙƒØ© ===
          sudo apt-get install -y netcat-traditional nmap wireshark-cli tcpdump
          
          # === Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø§Ø³ØªØºÙ„Ø§Ù„ ===
          sudo apt-get install -y exploitdb
          
          # === Ø£Ø¯ÙˆØ§Øª Ø£Ø®Ø±Ù‰ ===
          sudo apt-get install -y binwalk steghide exiftool
          
          echo "âœ… Cybersecurity tools installed"

      - name: Install Additional Tools (Binary)
        run: |
          # ØªØ«Ø¨ÙŠØª Go Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¯ÙˆØ§Øª
          sudo apt-get install -y golang-go
          export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin
          
          # ØªØ«Ø¨ÙŠØª Nuclei
          go install -v github.com/projectdiscovery/nuclei/v2/cmd/nuclei@latest
          
          # ØªØ«Ø¨ÙŠØª Subfinder
          go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest
          
          # ØªØ«Ø¨ÙŠØª httpx
          go install -v github.com/projectdiscovery/httpx/cmd/httpx@latest
          
          # ØªØ«Ø¨ÙŠØª naabu
          go install -v github.com/projectdiscovery/naabu/v2/cmd/naabu@latest
          
          echo "âœ… Go tools installed"

      - name: Install Metasploit Framework
        run: |
          # ØªØ«Ø¨ÙŠØª Metasploit
          curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall
          chmod 755 msfinstall
          ./msfinstall
          rm msfinstall
          echo "âœ… Metasploit installed"

      - name: Verify Installation
        run: |
          echo "=== Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ==="
          echo "Username: aban"
          echo "Password: aban"
          id aban
          
          echo ""
          echo "=== Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø«Ø¨ØªØ© ==="
          echo "Nmap: $(which nmap)"
          echo "SQLMap: $(which sqlmap)"
          echo "Nikto: $(which nikto)"
          echo "John: $(which john)"
          echo "Hashcat: $(which hashcat)"
          echo "Hydra: $(which hydra)"
          echo "Metasploit: $(which msfconsole)"
          echo "Nuclei: $(which nuclei)"
          
          echo ""
          echo "=== Ø¥ØµØ¯Ø§Ø± Nmap ==="
          nmap --version | head -2

      - name: Setup Working Directory
        run: |
          sudo mkdir -p /home/aban/tools
          sudo chown -R aban:aban /home/aban
          echo "âœ… Tools directory ready at /home/aban/tools"

      - name: Keep Alive (Ù„Ù„ØªØ¬Ø±Ø¨Ø©)
        run: |
          echo "ðŸŸ¢ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…"
          echo "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ø¨Ø±:"
          echo "ssh aban@<ip> (Ø¥Ø°Ø§ ÙƒØ§Ù† SSH Ù…ØªØ§Ø­)"
          echo "Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… su - aban"
          sleep 300  # ÙŠØ¨Ù‚Ù‰ ÙŠØ¹Ù…Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„Ù„ØªØ¬Ø±Ø¨Ø©
