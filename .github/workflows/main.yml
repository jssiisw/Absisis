name: Ubuntu + User aban + CyberSec Tools

on: [workflow_dispatch]

jobs:
  setup-cybersec:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 Ø³Ø§Ø¹Ø§Øª
    
    steps:
      - name: Create User 'aban'
        run: |
          sudo useradd -m -s /bin/bash aban
          echo "aban:aban" | sudo chpasswd
          sudo usermod -aG sudo aban
          echo "âœ… User 'aban' created with password 'aban'"

      - name: Install Cybersecurity Tools
        run: |
          sudo apt-get update -y
          
          # Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø­
          sudo apt-get install -y nmap
          
          # Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆÙŠØ¨
          sudo apt-get install -y sqlmap nikto dirb gobuster
          
          # ÙƒØ³Ø± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
          sudo apt-get install -y john hashcat hydra
          
          # Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø´Ø¨ÙƒØ©
          sudo apt-get install -y netcat-traditional tcpdump tshark
          
          # Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„
          sudo apt-get install -y binwalk steghide exiftool
          
          echo "âœ… All tools installed"

      - name: Install Go Tools
        run: |
          sudo apt-get install -y golang-go
          export PATH=$PATH:$HOME/go/bin
          
          go install -v github.com/projectdiscovery/nuclei/v2/cmd/nuclei@latest
          go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest
          go install -v github.com/projectdiscovery/httpx/cmd/httpx@latest

      - name: Verify Installation
        run: |
          echo "=== User Info ==="
          echo "Username: aban"
          echo "Password: aban"
          id aban
          
          echo ""
          echo "=== Installed Tools ==="
          which nmap sqlmap nikto dirb gobuster john hashcat hydra tshark tcpdump nuclei subfinder httpx
          
          echo ""
          echo "=== Versions ==="
          nmap --version | head -1
          sqlmap --version
          nuclei -version 2>/dev/null || echo "nuclei installed"

      - name: Keep Alive
        run: |
          echo "ðŸŸ¢ Environment ready for 6 hours"
          echo "User: aban | Password: aban"
          sleep 21600  # 6 Ø³Ø§Ø¹Ø§Øª
