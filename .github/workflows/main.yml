name: Ubuntu + User aban + CyberSec Tools

on: [workflow_dispatch]

jobs:
  setup-cybersec:
    runs-on: ubuntu-latest
    timeout-minutes: 360
    
    steps:
      - name: Create User 'aban'
        run: |
          sudo useradd -m -s /bin/bash aban
          echo "aban:aban" | sudo chpasswd
          sudo usermod -aG sudo aban
          echo "âœ… User 'aban' created"

      - name: Install Cybersecurity Tools
        run: |
          sudo apt-get update -y
          sudo apt-get install -y nmap sqlmap nikto dirb gobuster
          sudo apt-get install -y john hashcat hydra
          sudo apt-get install -y netcat-traditional tcpdump tshark
          sudo apt-get install -y binwalk steghide exiftool
          echo "âœ… APT tools installed"

      - name: Install Go Tools
        run: |
          sudo apt-get install -y golang-go
          export PATH=$PATH:$HOME/go/bin
          go install -v github.com/projectdiscovery/nuclei/v2/cmd/nuclei@latest
          go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest
          go install -v github.com/projectdiscovery/httpx/cmd/httpx@latest
          echo "$HOME/go/bin" >> $GITHUB_PATH
          echo "âœ… Go tools installed"

      - name: Verify Installation
        run: |
          echo "=== User Info ==="
          echo "Username: aban"
          echo "Password: aban"
          id aban
          
          echo ""
          echo "=== APT Tools ==="
          which nmap sqlmap nikto dirb gobuster john hashcat hydra tshark tcpdump
          
          echo ""
          echo "=== Go Tools ==="
          export PATH=$PATH:$HOME/go/bin
          which nuclei subfinder httpx || echo "Go tools in: $HOME/go/bin"
          
          echo ""
          echo "=== Test Versions ==="
          nmap --version | head -1
          sqlmap --version 2>/dev/null || echo "sqlmap OK"

      - name: Keep Alive
        run: |
          echo "ðŸŸ¢ Ready - User: aban | Pass: aban"
          sleep 21600
